Version 4
SHEET 1 1248 680
WIRE 528 -1168 368 -1168
WIRE 672 -1168 624 -1168
WIRE 800 -1168 752 -1168
WIRE 368 -1040 368 -1168
WIRE 528 -1040 368 -1040
WIRE 672 -1040 624 -1040
WIRE 800 -1040 800 -1168
WIRE 800 -1040 752 -1040
WIRE 576 -976 576 -1104
WIRE 368 -912 368 -1040
WIRE 528 -912 368 -912
WIRE 672 -912 624 -912
WIRE 800 -912 800 -1040
WIRE 800 -912 752 -912
WIRE 576 -848 576 -976
WIRE 368 -784 368 -912
WIRE 528 -784 368 -784
WIRE 672 -784 624 -784
WIRE 800 -784 800 -912
WIRE 800 -784 752 -784
WIRE -320 -720 -320 -800
WIRE -176 -720 -176 -800
WIRE 576 -720 576 -848
WIRE -320 -576 -320 -640
WIRE -176 -576 -176 -640
WIRE 368 -544 368 -784
WIRE 448 -544 368 -544
WIRE 576 -544 576 -720
WIRE 576 -544 544 -544
WIRE 608 -544 576 -544
WIRE 704 -544 688 -544
WIRE 736 -544 704 -544
WIRE 800 -544 800 -784
WIRE 800 -544 736 -544
WIRE 832 -544 800 -544
WIRE 928 -544 832 -544
WIRE 736 -464 736 -544
WIRE 368 -448 368 -544
WIRE 464 -448 464 -496
WIRE 576 -432 576 -544
WIRE 608 -432 576 -432
WIRE 704 -432 704 -544
WIRE 704 -432 672 -432
WIRE 656 -336 -32 -336
WIRE 368 -304 368 -368
WIRE 400 -304 368 -304
WIRE 464 -304 464 -368
WIRE 464 -304 400 -304
WIRE 832 -256 832 -544
WIRE 944 -256 832 -256
WIRE 400 -240 400 -304
WIRE 48 -224 48 -272
WIRE -32 -208 -32 -336
WIRE 16 -208 -32 -208
WIRE 128 -192 80 -192
WIRE 192 -192 128 -192
WIRE 304 -192 272 -192
WIRE 336 -192 304 -192
WIRE 736 -192 736 -384
WIRE 16 -176 -304 -176
WIRE 944 -160 944 -256
WIRE -304 -128 -304 -176
WIRE 48 -112 48 -160
WIRE -32 -48 -32 -208
WIRE 16 -48 -32 -48
WIRE 128 -48 128 -192
WIRE 128 -48 80 -48
WIRE 400 -48 400 -144
WIRE 656 -48 656 -336
WIRE 736 -48 736 -112
WIRE 736 -48 656 -48
WIRE 832 -32 832 -256
WIRE 736 0 736 -48
WIRE -304 32 -304 -48
WIRE 400 80 400 32
WIRE 48 112 48 64
WIRE 736 112 736 80
WIRE 16 128 -32 128
WIRE 736 128 736 112
WIRE 208 144 80 144
WIRE 304 144 304 -192
WIRE 304 144 272 144
WIRE 832 144 832 32
WIRE 944 144 944 -80
WIRE 944 144 832 144
WIRE 16 160 -304 160
WIRE -304 176 -304 160
WIRE 48 224 48 176
WIRE -32 272 -32 128
WIRE 160 272 -32 272
WIRE 736 272 736 208
WIRE 736 272 160 272
WIRE 832 272 832 144
WIRE 832 272 736 272
WIRE 912 272 832 272
WIRE -304 288 -304 256
WIRE -32 320 -32 272
WIRE 160 320 160 272
WIRE -32 432 -32 384
WIRE 160 432 160 400
FLAG 48 64 15V
FLAG 48 -272 15V
FLAG 48 -112 0
FLAG 48 224 0
FLAG 400 80 0
FLAG 160 432 0
FLAG -304 288 0
FLAG -304 32 out_gnd
FLAG 912 272 out_gnd
FLAG -32 432 0
FLAG -320 -576 0
FLAG -176 -576 0
FLAG -320 -800 15V
FLAG -176 -800 vcc
FLAG 368 -1168 vcc
FLAG 928 -544 out_vcc
FLAG -304 -176 v_set
FLAG 736 112 b
SYMBOL OpAmps\\opamp2 48 -256 R0
WINDOW 3 12 117 Left 2
SYMATTR Value LMX58B_LM2904B
SYMATTR InstName U1
SYMBOL OpAmps\\opamp2 48 80 R0
WINDOW 3 11 115 Left 2
SYMATTR Value LMX58B_LM2904B
SYMATTR InstName U2
SYMBOL schottky 272 128 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMBOL res 288 -208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 5k6
SYMBOL res 416 48 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res 176 416 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 0
SYMBOL npn 336 -240 R0
SYMATTR InstName Q1
SYMBOL npn 528 -720 R270
SYMATTR InstName Q2
SYMBOL npn 528 -848 R270
SYMATTR InstName Q3
SYMBOL npn 528 -976 R270
SYMATTR InstName Q4
SYMBOL npn 528 -1104 R270
SYMATTR InstName Q5
SYMBOL res 768 -1184 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 0.1
SYMBOL res 768 -1056 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 0.1
SYMBOL res 768 -928 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 0.1
SYMBOL res 768 -800 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 0.1
SYMBOL res 720 -16 R0
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL res 720 -208 R0
SYMATTR InstName R9
SYMATTR Value 47k
SYMBOL cap 816 -32 R0
SYMATTR InstName C1
SYMATTR Value 10µ
SYMATTR SpiceLine Rser=2
SYMBOL cap 80 -64 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 1n
SYMATTR SpiceLine Rser=1
SYMBOL pmos 544 -496 M270
SYMATTR InstName M1
SYMBOL res 448 -464 R0
SYMATTR InstName R10
SYMATTR Value 1k
SYMBOL res 704 -560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 6.8
SYMBOL res 384 -352 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL voltage -304 -144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 1
SYMBOL voltage -304 160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 1
SYMBOL cap -48 320 R0
SYMATTR InstName C3
SYMATTR Value 100n
SYMATTR SpiceLine Rser=1
SYMBOL voltage -320 -736 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 15
SYMBOL voltage -176 -736 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 30
SYMBOL res 720 -480 R0
SYMATTR InstName R13
SYMATTR Value 20
SYMBOL voltage 736 112 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 1
SYMATTR InstName V5
SYMATTR Value ""
SYMBOL cap 672 -448 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 100n
SYMBOL res 928 -176 R0
SYMATTR InstName R14
SYMATTR Value 100k
TEXT -624 -448 Left 2 !.inc lmx58b_lm2904b.lib
TEXT 984 -368 Left 2 !.ac dec 50 10 1000000
